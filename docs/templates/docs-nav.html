{% load docs_tags %}

<div id="menu-docs" class="transition-transform z-[5] duration-500 translate-x-[-120%] lg:translate-x-0 bg-blue-gray-800 lg:bg-transparent fixed top-0 bottom-0 left-0 right-0 lg:relative lg:flex lg:w-2/3">
  <ul class="w-full" id="tabs-tab" role="tablist">
  {% for category in categories %}
      {% if not user.is_authenticated and category != "internal" %}
          <button id="{{ category }}" class="btn-tab text-2xl rounded-t py-2 px-6 w-24 text-blue-gray-800
          {% if category == 'usage' %}bg-teal-accent-700{% else %}bg-gray-200{% endif %}">
            {% if "usage" in category %}
            <i class="fa-solid fa-user"></i>
            <script>
              tippy('#{{ category }}', {
                content: "DCUMETATION FOR USERS" + tooltipIcon,
                allowHTML: true,
              });
            </script>
            {% elif category == "development" %}
            <i class="fa-solid fa-code"></i>
            <script>
              tippy('#{{ category }}', {
                content: "DCUMETATION FOR DEVELOPERS" + tooltipIcon,
                allowHTML: true,
              });
            </script>
            {% elif category == "internal" %}
            <i class="fa-solid fa-user-plus"></i>
            {% endif %}
          </button>  
      {% endif %}             
  {% endfor %}
  {% for category in categories %}
            <ul id="tab-{{ category }}" 
            class="h-[100vh] lg:h-auto pb-28 lg:pb-4 bg-teal-accent-700 tab p-4 lg:rounded-bl {% if not 'usage' in category %}hidden{% endif %}" 
            role="tabpanel" 
            aria-labelledby="tabs-{{ category }}-tab">
              {% for url in nav %}
              {% if url.category|to_string == category %}
                  {% if not user.is_authenticated and category != "internal" %}
                        <li>
                            <a href="{{ url.url }}" class="block py-2 lg:py-1 text-sm text-ellipsis whitespace-nowrap text-blue-gray-800 underline font-bold">
                              {{ url.title }}
                            </a>
                        </li>
                {% endif %}
                {% endif %}
              {% endfor %}
            </ul>
  {% endfor %}
</ul>
</div>

<script>
  function tabs(tab) {
    console.log(tab)
      tab.addEventListener("click", function(el) {
        console.log()
      })
  }
  let btnTab = document.getElementsByClassName("btn-tab")
  Array.from(btnTab).forEach(function(tab) {
    tab.addEventListener("click", function(el) {
      Array.from(btnTab).forEach(function(btn) {
        btn.classList.remove("bg-teal-accent-700")
        btn.classList.add("bg-gray-200")
      })
      tab.classList.remove("bg-gray-200")
      tab.classList.add("bg-teal-accent-700")
      let tabs = document.getElementsByClassName("tab")
      Array.from(tabs).forEach(function(tab) {
        tab.classList.add("hidden")
      })
        document.getElementById("tab-" + tab.id).classList.remove("hidden")
      })
  })
</script>

  <button id="menu-docs-btn" aria-label="Open Menu" title="Open Menu" class="z-40 lg:hidden fixed text-3xl w-12 h-12 bottom-14 left-8 bg-blue-gray-900 text-gray-200 shadow-md rounded-full">
    <i class="fa-solid fa-ellipsis"></i>
  </button>
  <script>
    function toggleDocsMenu () {
      let menuDocs = document.getElementById("menu-docs")
      menuDocs.classList.toggle("translate-x-[-120%]")
    }
    const btnMenuDocs = document.getElementById("menu-docs-btn")
    btnMenuDocs.addEventListener("click", function() {
      toggleDocsMenu()
    })
  </script>