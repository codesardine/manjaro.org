{% load docs_tags %}

<div class="lg:border-gray-300 lg:border-r-2 left-sidebar flex">
  <button aria-label="Open Menu" title="Open Menu" class="btn-toggle-menu z-[1] lg:hidden absolute text-xl w-12 h-12 bottom-5 left-5 bg-blue-600 text-gray-100 shadow-md rounded-full">
    <i aria-label="Open Menu" class="fa-solid fa-bars btn-toggle-menu"></i>
  </button>
    <aside id="docs-nav" class="pt-12 px-8 lg:pt-0 lg:pl-2 lg-pr-4 z-10 lg:z-auto top-0 h-[100vh] lg:h-auto bg-gray-50 lg:bg-transparent translate-x-[-150%] lg:translate-x-0 fixed lg:relative transition-transform duration-200 shadow-md lg:shadow-none">
      <button id="btn-close-toggle-menu" aria-label="Close Menu" title="Close Menu" class="lg:hidden absolute top-3 right-3 p-2 -mt-2 -mr-2 rounded bg-gray-300 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none focus:shadow-outline">
        <svg class="w-5 text-gray-900" viewBox="0 0 24 24">
          <path fill="currentColor" d="M19.7,4.3c-0.4-0.4-1-0.4-1.4,0L12,10.6L5.7,4.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l6.3,6.3l-6.3,6.3 c-0.4,0.4-0.4,1,0,1.4C4.5,19.9,4.7,20,5,20s0.5-0.1,0.7-0.3l6.3-6.3l6.3,6.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 c0.4-0.4,0.4-1,0-1.4L13.4,12l6.3-6.3C20.1,5.3,20.1,4.7,19.7,4.3z"></path>
        </svg>
      </button>
      <ul>
        {% for category in categories %}
          {% if category|is_internal and not user.is_authenticated %}
                {% else %}
                <ul>
                  <h4 class="inline-block px-3 py-px text-xs font-semibold tracking-wider text-teal-900 uppercase rounded-full bg-yellow-accent-700">{{ category }}</h4>               
                  {% for url in nav %}
                    {% if url.category == category %}
                      {% if page.title == url.title %}
                        <li class="relative py-1">
                            <a href="{{ url.url }}" class="flex items-center text-sm py-1 px-3 h-8 overflow-hidden text-ellipsis whitespace-nowrap rounded text-teal-800 bg-teal-accent-400">
                              <h1 class="capitalize">{{ url.title }}</h1>
                            </a>
                        </li>
                      {% endif %}
                    {% endif %}
                  {% endfor %}
                  {% for url in nav %}
                    {% if url.category == category %}
                      {% if page.title != url.title %}
                        <li class="relative py-1">
                          <a href="{{ url.url }}" class="flex items-center text-sm py-1 px-3 h-8 overflow-hidden text-ellipsis whitespace-nowrap rounded text-blue-900 bg-cyan-accent-400 hover:text-teal-800 hover:bg-teal-accent-400">
                            <span class="capitalize">{{ url.title }}</span>
                          </a>
                      </li>
                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </ul>
          {% endif %}
      {% endfor %}
      </ul>
    </aside>
  </div>

{% block head %}
<style>
  h1 {
      height: min-content;
  }

  #content > div {
      display: flex;
      flex-direction: column;
  }   

  .container {
    padding: 0;
    padding-left: 2rem;
    padding-right: 2rem;
  }

  .container p:first-child {
      padding-top: 16px !important;
    }

  @media all and (max-width: 480px) {
    #docs-nav {
      width: 100%;
    }
  }

  @media all and (min-width: 1024px) {
    .left-sidebar {
        order: 1;
        flex: 1;
        max-width: min-content;
    }

    .content div:last-child {
        flex: 2;
        order: 2;
    }
  }

  @media all and (min-width: 768px) {
    #content > div {
        flex-direction: row;
        flex-wrap: wrap;    
    } 
  }

  .toggle-menu {
    transform: translateX(0) !important;
  }
</style>
<script async>
  let docsNav = document.querySelectorAll(".btn-toggle-menu")
  docsNav.forEach( function (element) {
    element.addEventListener("click", function(el) {
      let menu = document.getElementById("menu")
      if (!menu.classList.contains("translate-x-[-150%]")) {
        menu.classList.add("translate-x-[-150%]")
      }
      document.getElementById("docs-nav").classList.remove("translate-x-[-150%]")
    })
  });

  document.getElementById("btn-close-toggle-menu").addEventListener("click", function(el) {
    document.getElementById("docs-nav").classList.add("translate-x-[-150%]")
  })

  window.addEventListener("click", function(ev) {
    if (ev.target.id != "docs-nav" && !ev.target.classList.contains("btn-toggle-menu")) {
      document.getElementById("docs-nav").classList.add("translate-x-[-150%]")
    }
  })
</script>
{% endblock %}